#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

set -e

# Error handler to display a helpful message on failure
on_error() {
  echo "âŒ Pre-commit failed${CURRENT_STEP:+ at step: $CURRENT_STEP}"
  exit 1
}
trap 'on_error' ERR

echo "ğŸ” Running pre-commit checks..."
echo "â³ Checking ESLint and Prettier rules..."

CURRENT_STEP="lint-staged"
pnpm exec lint-staged
CURRENT_STEP=""

echo "ğŸ§ª Running all tests..."
CURRENT_STEP="tests"
pnpm exec jest
CURRENT_STEP=""

echo "âœ… Pre-commit checks passed successfully."
